{"version":3,"sources":["../src/skillsaudit.js"],"names":["define","$","ajax","mod","showDialog","title","body","fnOnShow","buttons","html","i","button","length","id","close","text","onClick","click","show","modal","trackinit","course","skills","auditid","cmid","addSkillsEventHandlers","addSummaryClickHandlers","e","parts","currentTarget","split","userid","skillid","comment","val","attr","promises","call","methodname","args","done","response","pDelete","feedbackid","remove","sortLink","data","order","table","parents","eq","tbody","find","rows","each","o","push","outerHTML","sortby","sort","a","b","valA","valB","localeCompare","append","update","groupid","highlight","change","interval","clearInterval","trackUpdateInterval","setInterval","viewinit","confidence","currentSkillId","onDeleteRating","replace","ratingid","ratingID","summaryHtml","last","hue","Math","round","css","width","background","ratingCount","onClearRating","drawChart","left","showSkill","not","fadeOut","slideDown","lo","number","fadeIn","saveSkill","whenDone","parent","tinyMCE","get","getContent","courseid","ratingHtml","addClass","unbind","showAll","slideUp","rowId","next","hide","options","forminit","removeClass","updateListOfSelectedSkills","ids","skillids","join","skill","onSkillClick","t","target","hasClass","url","onSkillDblClick","c","match","desc","link","helpLink","description","dblclick","verifiedSkills","value","trim","helpHtml","tbl","fail"],"mappings":"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","sourcesContent":["define(['jquery', 'core/ajax'], function($, ajax) {\r\n    var mod = {\r\n\t\tshowDialog: function(title, body, fnOnShow, buttons) {\r\n\t\t\t$('#dlg_title').html(title);\r\n\t\t\t$('#dlg_body').html(body);\r\n\t\t\tif(fnOnShow) {\r\n\t\t\t\tfnOnShow();\r\n\t\t\t}\r\n\t\t\tif(buttons) {\r\n\t\t\t\tvar html = '';\r\n\t\t\t\tfor(var i = 0; i < buttons.length; i++) {\r\n\t\t\t\t\tvar button = buttons[i];\r\n\t\t\t\t\thtml += '<button class=\"btn btn-secondary\" id=\"dlg_btn_' + button.id + '\" ' + (button.close?'data-dismiss=\"modal\"':'') + '>' + button.text + '</button> ';\r\n\t\t\t\t}\r\n\t\t\t\t$('#dlg_footer').html(html);\r\n\t\t\t\t\r\n\t\t\t\tfor(var i = 0; i < buttons.length; i++) {\r\n\t\t\t\t\tvar button = buttons[i];\r\n\t\t\t\t\tif(button.onClick) {\r\n\t\t\t\t\t\t$('#dlg_btn_' + button.id).click(button.onClick);\r\n\t\t\t\t\t}  \r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t$('#dlg_footer').html('<button class=\"btn btn-secondary\" id=\"dlg_btn_close\" data-dismiss=\"modal\">Close</button>');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t$('#dlg').show().modal();\r\n\t\t},\r\n\t\t\r\n\t\ttrackinit: function(course, skills, auditid, cmid) {\r\n\t\t\tfunction addSkillsEventHandlers() {\r\n\r\n\t\t\t\tfunction addSummaryClickHandlers() {\r\n\t\t\t\t\t$('.rating_td').click(function(e) {\r\n\t\t\t\t\t\tparts = e.currentTarget.id.split(\"_\");\r\n\t\t\t\t\t\tvar userid = parts[3];\r\n\t\t\t\t\t\tif(!userid) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar skillid = parts[2];\r\n\t\t\t\t\t\tmod.showDialog(\"Summary\", \"Loading...\", null, [{\r\n\t\t\t\t\t\t\tid:'send',\r\n\t\t\t\t\t\t\ttext: 'Send message',\r\n\t\t\t\t\t\t\tclose: true,\r\n\t\t\t\t\t\t\tonClick: function() {\r\n\t\t\t\t\t\t\t\tvar comment = $('.rating_comment_editor').val();\r\n\t\t\t\t\t\t\t\tvar id = $('.rating_comment_editor').attr('id');\r\n\t\t\t\t\t\t\t\tvar parts = id.split(\"_\");\r\n\t\t\t\t\t\t\t\tvar cmid = parts[2];\r\n\t\t\t\t\t\t\t\tvar skillid = parts[4];\r\n\t\t\t\t\t\t\t\tvar userid = parts[3];\r\n\t                                                        var promises = ajax.call([{\r\n\t                                                                methodname: 'mod_skillsaudit_post_feedback',\r\n\t                                                                args: {cmid: cmid, skillid: skillid, userid: userid, comment: comment}\r\n\t                                                        }]);\r\n\r\n\t                                                        promises[0].done(function(response) {\r\n\t                                                                $('.latest_comment').html(response);\r\n\t                                                                //console.log(response);\r\n\t                                                        });\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tid: 'close',\r\n\t\t\t\t\t\t\ttext: 'Close',\r\n\t\t\t\t\t\t\tclose: true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar promises = ajax.call([{\r\n\t\t\t\t\t\t\tmethodname: 'mod_skillsaudit_get_activity_summary',\r\n\t\t\t\t\t\t\targs: {cmid: cmid, userid: userid, skillid: skillid}\r\n\t\t\t\t\t\t}]);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tpromises[0].done(function(response) {\r\n\t                                            $('#dlg_body').html(response);\r\n\t                                            $('.btn_delete_feedback').click(function(e) {\r\n\t                                                var id = e.currentTarget.id.split('_')[3];\r\n\t                                                var pDelete = ajax.call([{\r\n\t                                                        methodname: 'mod_skillsaudit_delete_feedback',\r\n\t                                                        args: {cmid: cmid, feedbackid: id}\r\n\t                                                }]);\r\n\r\n\t                                                pDelete[0].done(function(response) {\r\n\t                                                        $('#teacher_feedback_' + response).remove();\r\n\t                                                });\r\n\t                                            });\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\t\r\n\t\t\t\t}\r\n\t\t\t\t$('th.r_sortable').click(function(e) {\r\n\r\n\t\t\t\t\tvar sortLink = $(e.currentTarget);\r\n\t\t\t\t\tif(sortLink.data('order') == \"asc\") {\r\n\t\t\t\t\t\tsortLink.data('order', \"desc\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsortLink.data('order', \"asc\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar order = sortLink.data('order');\r\n\t\t\t\t\tvar table  = $(e.currentTarget).parents('table').eq(0);\r\n\r\n\t\t\t\t\tvar tbody = table.find('tbody');\r\n\t\t\t\t\tvar rows = [];\r\n\t\t\t\t\ttbody.find('tr').each(function(i, o) {\r\n\t\t\t\t\t\trows.push(o.outerHTML);\r\n\t\t\t\t\t});\r\n\t\t\t\t\ttbody.html('');\r\n\t\t\t\t\tvar sortby = $(e.currentTarget).data('col');\r\n\t\t\t\t\trows.sort(function(a, b) {\r\n\t\t\t\t\t\tvar valA = $(a).find(\"td[data-col='\" + sortby + \"']\").data('sortable');\r\n\t\t\t\t\t\tvar valB = $(b).find(\"td[data-col='\" + sortby + \"']\").data('sortable');\r\n\t\t\t\t\t\tif(typeof(valA) == \"string\") {\r\n\t\t\t\t\t\t\tif(order == \"asc\") {\r\n\t\t\t\t\t\t\t\treturn valA.localeCompare(valB);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn valB.localeCompare(valA);\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(order == \"asc\") {\r\n\t\t\t\t\t\t\treturn valA - valB;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn valB - valA;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tfor(var i = 0; i < rows.length; i++) {\r\n\t\t\t\t\t\ttbody.append(rows[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\taddSummaryClickHandlers();\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\taddSummaryClickHandlers();\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction update() {\r\n\t\t\t\tvar groupid = $('#select_group').val();\r\n\t\t\t\tvar highlight = $('#highlight').val();\r\n\t\t\t\tvar promises = ajax.call([{\r\n\t\t\t\t\tmethodname: 'mod_skillsaudit_update_tracker',\r\n\t\t\t\t\targs: {cmid: cmid, groupid: groupid, highlight: highlight}\r\n\t\t\t\t}]);\r\n\t\t\t\t\r\n\t\t\t\tpromises[0].done(function(response) {\r\n\t\t\t\t\t$('#tracker_table').html(response);\r\n\t\t\t\t\taddSkillsEventHandlers();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t$('#btn_update_progress_tracker').click(function() {\r\n\t\t\t\tupdate();\r\n\t\t\t});\r\n\t\t\t$('#select_group').change(update);\r\n\t\t\t$('#highlight').change(update);\r\n\t\t\t$('#autorefresh').change(function() {\r\n\t\t\t\tvar interval = $(this).val() * 1000;\r\n\t\t\t\tclearInterval(mod.trackUpdateInterval);\r\n\t\t\t\tif(interval > 0) {\r\n\t\t\t\t\tmod.trackUpdateInterval = setInterval(update, interval);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\taddSkillsEventHandlers();\r\n\t\t},\r\n\t\t\r\n\t\tviewinit: function(course, skills, auditid, cmid) {\r\n\t\t\tvar i;\r\n\t\t\tvar confidence = 0;\r\n\t\t\tvar currentSkillId = -1;\r\n\t\t\r\n\t\t\t\r\n\t\t\tfunction onDeleteRating(e) {\r\n\t\t\t\tvar id = e.currentTarget.id.replace(\"btn_delete_\", \"\");\r\n\t\t\t\tmod.showDialog(\"Confirm delete\", 'Are you sure you want to delete this rating?<p>If you press save, there\\'s no way to undo this action</p>', null, [{\r\n\t\t\t\t\tid:'save', \r\n\t\t\t\t\ttext:'Save', \r\n\t\t\t\t\tclose:true, \r\n\t\t\t\t\tonClick: function() {\r\n\t\t\t\t\t\tvar promises = ajax.call([{\r\n\t\t\t\t\t\t\tmethodname: 'mod_skillsaudit_delete_rating',\r\n\t\t\t\t\t\t\targs: {cmid: cmid, ratingid: id}\r\n\t\t\t\t\t\t}]);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tpromises[0].done(function(response) {\r\n\t\t\t\t\t\t\tif(response.ratingID == id) {\r\n\t\t\t\t\t\t\t\t$('#rating_' + id).remove();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$('.skillsaudit_user_summary').html(response.summaryHtml);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar confidence = $('#skill_row_' + currentSkillId + ' .minithumb').last().attr('data-confidence');\r\n\t\t\t\t\t\t\tif(!confidence)\r\n\t\t\t\t\t\t\t\tconfidence = 0;\r\n\t\t\t\t\t\t\tvar hue = Math.round(confidence * 120.0 / 100.0);\r\n\t\t\t\t\t\t\t$('#conf_ind_' + currentSkillId).css({width: confidence + '%', background: 'linear-gradient(to right,red,hsl(' + hue  + ',100%,50%)'});\r\n\t\t\t\t\t\t\tvar ratingCount = $('#skill_row_' + currentSkillId).find('.rating').length;\r\n\t\t\t\t\t\t\t$('#rating_stats_' + currentSkillId + ' .rating_count').text(ratingCount);\r\n\t\t\t\t\t\t\t$('#skill_row_' + currentSkillId + ' .latest_rating_time').text('Last rated: today');\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}, \r\n\t\t\t\t{id:'cancel', text:'Cancel', close:true}]);\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction onClearRating(e) {\r\n\t\t\t\tvar id = e.currentTarget.id.replace(\"btn_clear_\", \"\");\r\n\t\t\t\tmod.showDialog('Confirm clear', 'Are you sure you want to clear this comment?<p>If you press save, there\\'s no way to undo this action</p>', null, [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid:'clear', text:'Clear', close:true, onClick: function() {\r\n\t\t\t\t\t\t\tvar promises = ajax.call([{\r\n\t\t\t\t\t\t\t\tmethodname: 'mod_skillsaudit_clear_rating',\r\n\t\t\t\t\t\t\t\targs: {cmid: cmid, ratingid: id}\r\n\t\t\t\t\t\t\t}]);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tpromises[0].done(function(response) {\r\n\t\t\t\t\t\t\t\tif(response == id) {\r\n\t\t\t\t\t\t\t\t\t$('#rating_' + id + ' .rating_comment').remove();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 'cancel', text:'Cancel', close:true\r\n\t\t\t\t\t}\r\n\t\t\t\t]);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t$('.btn_delete').click(onDeleteRating);\r\n\t\t\t$('.btn_clear').click(onClearRating);\r\n\t\t\t\r\n\t\t\tfunction drawChart(confidence) {\r\n\t\t\t\tvar h = 120 * confidence / 100;\r\n\t\t\t\tvar d = 180 - (180 * confidence / 100);\r\n\t\t\t\t$('#main_indicator').css({left:confidence + '%'}).find('.thumb').css({\r\n\t\t\t\t\t'background-color': 'hsl(' + h + ',100%,50%)',\r\n\t\t\t\t\t'transform': 'rotate(' + d + 'deg)'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\tfunction showSkill(id) {\r\n\t\t\t\tcurrentSkillId = id;\r\n\t\t\t\t$('.skill_row').not('#skill_row_' + id).fadeOut();\r\n\t\t\t\t$('#skill_row_' + id + \" .ratings\").slideDown();\r\n\t\t\t\tconfidence = 0;\r\n\t\t\t\tif(skills && skills[id] && skills[id].confidence)\r\n\t\t\t\t\tconfidence = skills[id].confidence;\r\n\r\n\t\t\t\tvar lo = $('#skill_description_' + id).text();\r\n\t\t\t\tvar number = $('#skill_row_' + id + ' .skillnumber').text();\r\n\t\t\t\t$('.current_lo_title').text(number);\r\n\t\t\t\t$('.current_lo').text(lo);\r\n\t\t\t\t\t\r\n\t\t\t\tdrawChart(confidence);\r\n\t\t\t\t$('#controls, #skill_row_' + id).fadeIn();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction saveSkill(whenDone) {\r\n\t\t\t\tvar hue = Math.round(confidence * 120.0 / 100.0);\r\n\t\t\t\t$('#conf_ind_' + currentSkillId).css({width: confidence + '%', background: 'linear-gradient(to right,red,hsl(' + hue  + ',100%,50%)'}).parent().attr('title', confidence + '%');\r\n\t\t\t\t\r\n\t\t\t\tskills[currentSkillId].confidence = confidence;\r\n\t\t\t\tvar comment = $('#id_comment').val();\r\n\t\t\t\t// fix for tinymce\r\n\t\t\t\tif(typeof(tinyMCE)!==undefined) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tcomment = tinyMCE.get('id_comment').getContent();\t\r\n\t\t\t\t\t} catch(e) {\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tvar promises = ajax.call([{\r\n\t\t\t\t\tmethodname: 'mod_skillsaudit_save_confidence',\r\n\t\t\t\t\targs: {courseid: course, skillid: currentSkillId, confidence: confidence, comment: comment, auditid:auditid}\r\n\t\t\t\t}]);\r\n\t\t\t\t\r\n\t\t\t\tpromises[0].done(function(response) {\r\n\t\t\t\t\t$('#skill_row_' + currentSkillId + ' .ratings .new_ratings').append(response.ratingHtml);\r\n\t\t\t\t\t$('#skill_row_' + currentSkillId + ' .skillnumber').addClass('skill_included_yes');\r\n\t\t\t\t\t$('.btn_delete').unbind('click').click(onDeleteRating);\r\n\t\t\t\t\t$('.btn_clear').unbind('click').click(onClearRating);\r\n\t\t\t\t\t$('.skillsaudit_user_summary').html(response.summaryHtml);\r\n\t\t\t\t\tvar ratingCount = $('#skill_row_' + currentSkillId).find('.rating').length;\r\n\t\t\t\t\t$('#rating_stats_' + currentSkillId + ' .rating_count').text(ratingCount);\r\n\t\t\t\t\t$('#skill_row_' + currentSkillId + ' .latest_rating_time').text('Last rated: today');\r\n\t\t\t\t\tif(whenDone)\r\n\t\t\t\t\t\twhenDone();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t$('#btn_save_confidence').click(function() {\r\n\t\t\t\tsaveSkill(showAll);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t$('.skill_row').click(function(e) {\r\n\t\t\t\tvar id = e.currentTarget.id.replace('skill_row_', '');\r\n\t\t\t\tshowSkill(id);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tfunction showAll() {\r\n\t\t\t\t$('#controls').fadeOut();\r\n\t\t\t\t$('#skill_row_' + currentSkillId + \" .ratings\").slideUp();\r\n\t\t\t\t$('.skill_row').fadeIn();\r\n\t\t\t\tcurrentSkillId = -1\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t$('#btn_show_all').click(showAll);\r\n\t\t\t\r\n\t\t\t$('#btn_show_next').click(function(e) {\r\n\t\t\t\tsaveSkill(function() {\r\n\t\t\t\t\tvar rowId = $('#skill_row_' + currentSkillId).next().attr('id');\r\n\t\t\t\t\tshowAll();\r\n\t\t\t\t\tif(rowId) {\r\n\t\t\t\t\t\tshowSkill(rowId.replace('skill_row_', ''));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t$('#controls').hide();\r\n\t\t\t\r\n\t\t\t$('.btn_hide_comments').click(function() {\r\n\t\t\t\t$('#skill_row_' + currentSkillId + \" .ratings\").slideUp();\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t$('.btn_cancel').click(function() {\r\n\t\t\t\tshowAll();\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tvar options = $('.btn_confidence');\r\n\t\t\t\t\r\n\t\t\t$('.btn_anim').click(function(e) {\r\n\t\t\t\tvar id = e.currentTarget.id.replace('btn_confidence_', '')\r\n\t\t\t\tconfidence = Math.round(id * 100.0 / (options.length - 1))\r\n\t\t\t\tdrawChart(confidence);\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t\t\r\n\t\t},\r\n        forminit: function(course, modpath) {\r\n\t\t\t$('#id_selectall').click(function() {\r\n\t\t\t\t$('.skill_included').removeClass('skill_included_no').addClass('skill_included_yes');\r\n\t\t\t\tupdateListOfSelectedSkills();\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t$('#id_selectnone').click(function() {\r\n\t\t\t\t$('.skill_included').removeClass('skill_included_yes').addClass('skill_included_no');\r\n\t\t\t\tupdateListOfSelectedSkills();\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t$('#id_deleteunused').click(function() {\r\n\t\t\t\tmod.showDialog('Confirm delete', 'Are you sure you want to delete all skills that aren\\'t used in this course?<p>If you press save, there\\'s no way to undo this action</p>', null, [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid:'delete', text: 'Delete', close:true, onClick: function() {\r\n\t\t\t\t\t\t\tvar ids = [];\r\n\t\t\t\t\t\t\t$('.skill_included_no').each(function(i, e) {\r\n\t\t\t\t\t\t\t\tids.push(e.id.replace('skill_included_',''));\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tvar promises = ajax.call([{\r\n\t\t\t\t\t\t\t\tmethodname: 'mod_skillsaudit_delete_unused_skills',\r\n\t\t\t\t\t\t\t\targs: {courseid: course, skillids: ids.join(',')}\r\n\t\t\t\t\t\t\t}]);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tpromises[0].done(function(response) {\r\n\t\t\t\t\t\t\t\tvar ids = response.split(',');\r\n\t\t\t\t\t\t\t\tfor(var i = 0; i < ids.length; i++) {\r\n\t\t\t\t\t\t\t\t\t$('#skill_row_' + ids[i]).remove();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 'cancel', text: 'Cancel', close:true\r\n\t\t\t\t\t}\r\n\t\t\t\t]);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tfunction updateListOfSelectedSkills() {\r\n\t\t\t\tvar ids = \"\";\r\n\t\t\t\t$('.skill_included_yes').each(function(i, skill) {\r\n\t\t\t\t\tids = ids + skill.id.replace('skill_included_', '') + \",\";\r\n\t\t\t\t});\r\n\t\t\t\tids = ids.replace(/,$/, '');\r\n\t\t\t\t$(\"input[name='skills']\").val(ids);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction onSkillClick(e) {\r\n\t\t\t\tvar t = $(e.target);\r\n\t\t\t\tif(t.hasClass('skill_included_yes')) {\r\n\t\t\t\t\tt.removeClass('skill_included_yes');\r\n\t\t\t\t\tt.addClass('skill_included_no');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tt.removeClass('skill_included_no');\r\n\t\t\t\t\tt.addClass('skill_included_yes');\r\n\t\t\t\t\turl = t.attr('src');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// update list of selected skills\r\n\t\t\t\tupdateListOfSelectedSkills();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction onSkillDblClick(e) {\r\n\t\t\t\tvar t = $(e.target);\r\n\t\t\t\t\r\n\t\t\t\t// loop through parents until we find the table row\r\n\t\t\t\tvar c = 0;\r\n\t\t\t\twhile(!t.attr('id').match(/skill_row_/)){\r\n\t\t\t\t\tif(c++ > 4)break;\r\n\t\t\t\t\tt = t.parent();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar id = t.attr('id').replace('skill_row_', '');\r\n\t\t\t\tvar number = t.find('.skill_number').text();\r\n\t\t\t\tvar desc = t.find('.skill_description').text();\r\n\t\t\t\tvar link = t.find('.skill_help_link').attr('href');\r\n\t\t\t\tmod.showDialog(\"Edit skill\", '<h3>Note:</h3>Editing a skill here will affect all skills audits that include that skill in this course<div class=\"form-group\"><label for=\"skill_edit_number\"><h4>Spec. number:</h4></label><input class=\"form-control\" id=\"skill_edit_number\" value=\"' + number + '\"></div><div class=\"form-group\"><label for=\"skill_edit_description\"><h4>Description:</h4></label><input class=\"form-control\" id=\"skill_edit_description\" value=\"' + desc + '\"><label for=\"skill_edit_link\"><h4>Help link:</h4></label><input class=\"form-control\" id=\"skill_edit_link\" value=\"' + link + '\"><h3>Warning</h3>Deleting this skill cannot be undone. It will remove the skill from this audit and any others in this course.', null, [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 'save', text: 'Save', close:true, onClick: function() {\r\n\t\t\t\t\t\t\tdesc = $('#skill_edit_description').val();\r\n\t\t\t\t\t\t\tnumber = $('#skill_edit_number').val();\r\n\t\t\t\t\t\t\thelpLink = $('#skill_edit_link').val();\r\n\t\t\t\t\t\t\tvar promises = ajax.call([{\r\n\t\t\t\t\t\t\t\tmethodname: 'mod_skillsaudit_edit_skill',\r\n\t\t\t\t\t\t\t\targs: {courseid: course, skillid: id, number: number, description: desc, link:helpLink}\r\n\t\t\t\t\t\t\t}]);\r\n\t\t\t\t\t\t\tpromises[0].done(function(response) {\r\n\t\t\t\t\t\t\t\tt.find('.skill_description').text(desc);\r\n\t\t\t\t\t\t\t\tif(helpLink.length > 0) {\r\n\t\t\t\t\t\t\t\t\tnumber = '<span class=\"info_icon\"></span>' + number;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tt.find('.skill_help_link').attr('href', helpLink).html(number);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, \r\n\t\t\t\t\t\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 'delete', text: 'Delete', close:true, onClick: function() {\r\n\t\t\t\t\t\t\tvar promises = ajax.call([{\r\n\t\t\t\t\t\t\t\tmethodname: 'mod_skillsaudit_delete_skill',\r\n\t\t\t\t\t\t\t\targs: {courseid: course, skillid: id}\r\n\t\t\t\t\t\t\t}]);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tpromises[0].done(function(response) {\r\n\t\t\t\t\t\t\t\t// remove skill from the table\r\n\t\t\t\t\t\t\t\t$('#skill_row_' + id).remove();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 'cancel', text: 'Cancel', close:true\r\n\t\t\t\t\t}\r\n\t\t\t\t]);\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// included / not included toggle\r\n\t\t\t$('.skill_included').click(onSkillClick);\r\n\t\t\t$('.skill_row').dblclick(onSkillDblClick);\r\n\t\t\t\r\n\t\t\t$('#id_addnew').click(function() {\r\n\t\t\t\tvar verifiedSkills = [];\r\n\t\t\t\tmod.showDialog(\"Check new skills\", '<div id=\"skills_preview\">', function() {\r\n\t\t\t\t\tvar skills = $('#id_newskills').val().split(\"\\n\");\r\n\t\t\t\t\tvar html = '<table class=\"generaltable\"><tr><th>Number</th><th>Description</th><th>Help link</th></tr>';\r\n\t\t\t\t\t\r\n\t\t\t\t\t$.each(skills, function(i, value) {\r\n\t\t\t\t\t\tvar parts = value.trim().match(/^(.*?)\\s+(.*?)\\s*(https?:\\/\\/.*)?$/m);\r\n\t\t\t\t\t\tvar number = \"\";\r\n\t\t\t\t\t\tvar helpLink = \"\";\r\n\t\t\t\t\t\tvar description = value;\r\n\t\t\t\t\t\tif(parts && parts.length > 2) {\r\n\t\t\t\t\t\t\tnumber = parts[1].trim();\r\n\t\t\t\t\t\t\tdescription = parts[2].trim();\r\n\t\t\t\t\t\t\tif(parts.length > 3 && parts[3]) {\r\n\t\t\t\t\t\t\t\thelpLink = parts[3].trim();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar helpHtml = '';\r\n\t\t\t\t\t\tif(helpLink.length > 0) {\r\n\t\t\t\t\t\t\thelpHtml += '<a href=\"' + helpLink + '\" target=\"_blank\"><span class=\"info_icon\"></span></a>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tverifiedSkills.push({number: number, description: description, link: helpLink});\r\n\t\t\t\t\t\thtml += '<tr><td>' + number + '</td><td>' + description + '</td><td>' + helpHtml + '</td></tr>';\r\n\t\t\t\t\t});\r\n\t\t\t\t\thtml += '</table>';\r\n\t\t\t\t\t$('#skills_preview').html(html);\r\n\t\t\t\t}, [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 'add', text: 'Add', close: true, onClick: function() {\r\n\t\t\t\t\t\t\tvar promises = ajax.call([{\r\n\t\t\t\t\t\t\t\tmethodname: 'mod_skillsaudit_add_skills',\r\n\t\t\t\t\t\t\t\targs: {courseid: course, skills: verifiedSkills}\r\n\t\t\t\t\t\t\t}]);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tpromises[0].done(function(response) {\r\n\t\t\t\t\t\t\t\t// add new skills to list option\r\n\t\t\t\t\t\t\t\tvar tbl = $('#tbl_skills');\r\n\t\t\t\t\t\t\t\t$.each(response, function(i, skill) {\r\n\t\t\t\t\t\t\t\t\ttbl.append('<tr class=\"skill_row\" id=\"skill_row_' + skill.id + '\"><td class=\"skill_number\"><a class=\"skill_help_link\" href=\"' + skill.link + '\">' + (skill.link.length > 0?'<span class=\"info_icon\"></span>':'') + skill.number + '</a></td><td class=\"skill_description\">' + skill.description + '</td><td><span id=\"skill_included_' + skill.id + '\" class=\"skill_included_yes skill_included\"></span></td></tr>');\r\n\t\t\t\t\t\t\t\t\t$('#skill_included_' + skill.id).click(onSkillClick);\r\n\t\t\t\t\t\t\t\t\t$('#skill_row_' + skill.id).dblclick(onSkillDblClick);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tupdateListOfSelectedSkills();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// clear new skills add box\r\n\t\t\t\t\t\t\t\t$('#id_newskills').val('');\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}).fail(function(response) {\r\n\t\t\t\t\t\t\t\t$('#skills_preview').html(\"Could not add skill\");\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 'cancel', text: 'Cancel', close: true\r\n\t\t\t\t\t}\r\n\t\t\t\t]);\r\n\t\t\t});\r\n        }\r\n    };\r\n\treturn mod;\r\n});\r\n"],"file":"skillsaudit.min.js"}